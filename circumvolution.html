<!DOCTYPE html> 
<html> 
<body> 

<script src="URI.js"></script>
<script src="view.js"></script>
<script>
function isEmpty(obj) {
  var p;
  for (p in obj) {
    if (obj.hasOwnProperty(p)) { return false; }
  }
  return true;
}

var url = URI(document.documentURI);
var options = URI.parseQuery(url.query());
var bodyEl = document.getElementsByTagName("body")[0];
if (isEmpty(options)) {
  var messageEl = document.createElement("div");
  var barrelRolls = url.clone();
  barrelRolls.query({
    source_url: "https://www.youtube.com/watch?v=2Tjp0mRb4XA",
    mp4source: "youtubeinmp4",
    loop_enabled: 1,
    loopstart: 36,
    loopend: 40.4,
    paused: 0,
    playback_speed: 1
  });
  bodyEl.appendChild(messageEl);
  bodyEl.innerHTML =
    "<h1><pre>CIRCUMVOLUTION</pre></h1>"
    + "<h3>Elucidate movement and other performance "
    + "with parametrizable video clips.</h3>"
    + "With no query string parameters in the URL (i.e. no '?...=...'), "
    + "this screen is displayed.<br><br>"
    + "Some examples:</br>"
    + "<a href=\"" + barrelRolls + "\">Barrel Rolls</a>"
    + "<br><br>"
    + "Please send suggestions, comments, praise, and scurrilities "
    + "to (ted at circulated dot ca) "
    + "or open an issue at the "
    + "<a href=\"https://github.com/intuited/circumvolution\">"
    + "development page</a>."
} else {
  var viewEl = document.createElement("div");
  bodyEl.appendChild(viewEl);
  var view = new View(viewEl, options);
}
</script>

</body> 
</html>
