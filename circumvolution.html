<!DOCTYPE html> 
<html> 
<body> 

<script src="URI.js"></script>
<script src="view.js?v=0.12"></script>
<script>
function isEmpty(obj) {
  var p;
  for (p in obj) {
    if (obj.hasOwnProperty(p)) { return false; }
  }
  return true;
}

var url = URI(document.documentURI);
var options = URI.parseQuery(url.query());
var bodyEl = document.getElementsByTagName("body")[0];
if (isEmpty(options)) {
  var messageEl = document.createElement("div");
  // Some example URLs
  var barrelRolls = url.clone().query({
    hash: "2Tjp0mRb4XA",
    mp4source: "youtubeinmp4",
    loop_enabled: 1,
    current_time: 30,
    loopstart: 36,
    loopend: 40.4,
    paused: 0,
    playback_speed: 1
  });
  var halfSpeedBarrelRolls = url.clone().query({
    hash: "2Tjp0mRb4XA",
    mp4source: "youtubeinmp4",
    loop_enabled: 1,
    current_time: 30,
    loopstart: 36,
    loopend: 40.4,
    paused: 0,
    playback_speed: 0.5
  });
  var boutThatBass = url.clone().query({
    hash: "iyTTX6Wlf1Y",
    mp4source: "youtubeinmp4",
    loop_enabled: 1,
    current_time: 10,
    loopstart: 10,
    loopend: 10.83,
    paused: 0,
    playback_speed: 1
  });
  var boutThatBass100BPM = url.clone().query({
    hash: "iyTTX6Wlf1Y",
    mp4source: "youtubeinmp4",
    loop_enabled: 1,
    current_time: 10,
    loopstart: 10,
    loopend: 10.83,
    paused: 0,
    playback_speed: 0.833
  });
  bodyEl.appendChild(messageEl);
  bodyEl.innerHTML =
    "<h1><pre>CIRCUMVOLUTION</pre></h1>"
    + "<h3>Elucidate movement and other performance "
    + "with parametrizable video loops.</h3>"
    + "With no query string parameters in the URL (i.e. nothing after the question mark),"
    + "this screen is displayed.<br><br>"
    + "Some examples:<br>"
    + "<a href=\"" + barrelRolls + "\">Barrel Rolls</a><br>"
    + "<a href=\"" + halfSpeedBarrelRolls + "\">Half Speed Barrel Rolls</a><br>"
    + "<a href=\"" + boutThatBass + "\">'Bout That Bass</a><br>"
    + "<a href=\"" + boutThatBass100BPM + "\">'Bout That Bass (100 BPM)</a><br>"
    + "<br>"
    + "Note that it may take some time for the videos to load.  Please be patient.<br><br>"
    + "The current version of <em>Circumvolution</em> is a rough draft; interface and functionality are subject to change.<br>"
    + "Being mindful of this, feel free to share links to loops (\"circumvolutions\") you have created.<br><br>"
    + "For now, <em>Circumvolution</em> is just tested on the Chrome browser.  If you experience issues when using other browsers, that is not surprising.<br><br>"
    + "Please send suggestions, comments, praise, and scurrilities "
    + "to (ted at circulated dot ca) "
    + "or open an issue at the "
    + "<a href=\"https://github.com/intuited/circumvolution\">"
    + "development page</a>."
} else {
  var viewEl = document.createElement("div");
  bodyEl.appendChild(viewEl);
  var view = new View(viewEl, options);
}
</script>

</body> 
</html>
